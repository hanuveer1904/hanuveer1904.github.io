<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Breakout</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0b0f1a;
  --panel:rgba(255,255,255,.08);
  --border:rgba(255,255,255,.15);
  --text:#eaeaff;
  --accent:#6c8cff;
  --danger:#ff6b6b;
}

*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:system-ui,sans-serif;
}

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:radial-gradient(circle at top,#141b33,var(--bg));
  color:var(--text);
}

.game{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:18px;
  padding:1.2rem;
  text-align:center;
  backdrop-filter:blur(12px);
}

canvas{
  background:#050813;
  border-radius:12px;
  display:block;
  margin:0 auto;
}

.info{
  margin-top:.6rem;
  font-size:.9rem;
  opacity:.9;
}

button{
  margin-top:.7rem;
  padding:.45rem 1rem;
  border-radius:10px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  cursor:pointer;
}

button:hover{
  background:rgba(255,255,255,.12);
}
</style>
</head>

<body>

<div class="game">
  <h1>üß± Breakout</h1>
  <canvas id="canvas" width="420" height="340"></canvas>
  <div class="info">
    Score: <b id="score">0</b> |
    Lives: <b id="lives">3</b><br>
    Controls: ‚Üê ‚Üí
  </div>
  <button onclick="resetGame()">Restart</button>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");

// Paddle
const paddle = {
  w: 70,
  h: 10,
  x: canvas.width/2 - 35,
  y: canvas.height - 20,
  speed: 6
};

// Ball
const ball = {
  r: 6,
  x: canvas.width/2,
  y: canvas.height - 40,
  vx: 4,
  vy: -4
};

// Bricks
const rows = 5;
const cols = 8;
const brickW = 44;
const brickH = 14;
const gap = 6;
let bricks = [];

let score = 0;
let lives = 3;
let left = false;
let right = false;

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") left=true;
  if(e.key==="ArrowRight") right=true;
});

document.addEventListener("keyup",e=>{
  if(e.key==="ArrowLeft") left=false;
  if(e.key==="ArrowRight") right=false;
});

function initBricks(){
  bricks = [];
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      bricks.push({
        x: c*(brickW+gap)+22,
        y: r*(brickH+gap)+30,
        alive: true
      });
    }
  }
}

function resetBall(){
  ball.x = canvas.width/2;
  ball.y = canvas.height - 40;
  ball.vx = Math.random()>0.5 ? 4 : -4;
  ball.vy = -4;
}

function resetGame(){
  score = 0;
  lives = 3;
  scoreEl.textContent = score;
  livesEl.textContent = lives;
  initBricks();
  resetBall();
}

function update(){
  // Paddle
  if(left) paddle.x -= paddle.speed;
  if(right) paddle.x += paddle.speed;
  paddle.x = Math.max(0,Math.min(canvas.width-paddle.w,paddle.x));

  // Ball movement
  ball.x += ball.vx;
  ball.y += ball.vy;

  // Wall collisions
  if(ball.x-ball.r <= 0 || ball.x+ball.r >= canvas.width){
    ball.vx *= -1;
  }
  if(ball.y-ball.r <= 0){
    ball.vy *= -1;
  }

  // Paddle collision
  if(
    ball.y+ball.r >= paddle.y &&
    ball.x >= paddle.x &&
    ball.x <= paddle.x+paddle.w
  ){
    const hit = (ball.x - (paddle.x + paddle.w/2)) / (paddle.w/2);
    ball.vx = hit * 5;
    ball.vy *= -1;
  }

  // Brick collision
  bricks.forEach(b=>{
    if(b.alive &&
      ball.x > b.x &&
      ball.x < b.x+brickW &&
      ball.y-ball.r < b.y+brickH &&
      ball.y+ball.r > b.y
    ){
      b.alive = false;
      ball.vy *= -1;
      score += 10;
      scoreEl.textContent = score;
    }
  });

  // Lose life
  if(ball.y > canvas.height){
    lives--;
    livesEl.textContent = lives;
    if(lives === 0){
      alert("Game Over!");
      resetGame();
    } else {
      resetBall();
    }
  }

  // Win
  if(bricks.every(b=>!b.alive)){
    alert("You Win!");
    resetGame();
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Paddle
  ctx.fillStyle="#6c8cff";
  ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);

  // Ball
  ctx.beginPath();
  ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
  ctx.fill();

  // Bricks
  bricks.forEach(b=>{
    if(b.alive){
      ctx.fillRect(b.x,b.y,brickW,brickH);
    }
  });
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

initBricks();
loop();
</script>

</body>
</html>
